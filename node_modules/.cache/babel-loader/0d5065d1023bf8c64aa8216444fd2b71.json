{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Alex\\\\IdeaProjects\\\\FireFrontEnd\\\\src\\\\FilteredTable.js\";\nimport React, { useState, useEffect } from 'react';\nimport TableHead from \"./TableHead\";\nimport TableBody from \"./TableBody\";\nimport ReactSelect from \"./ReactSelect\";\nexport default function FilteredTable(props) {\n  const [fires, setFires] = useState([]);\n  const {\n    name,\n    fireStation,\n    message,\n    district,\n    destination,\n    whereWasTheFire\n  } = props.match.params;\n  const objectWithProperties = {\n    fireStation,\n    message,\n    district,\n    destination,\n    whereWasTheFire\n  };\n  const encoded = encodeURI(`/api/get/${name}`);\n  useEffect(api => {\n    if (checkProperties(objectWithProperties)) {\n      fetch(encoded, {\n        method: \"POST\",\n        body: JSON.stringify({\n          fireStation,\n          message,\n          district,\n          destination,\n          whereWasTheFire\n        }),\n        headers: {\n          \"Content-type\": \"application/json; charset=UTF-8\"\n        }\n      }).then(response => response.json()).then(data => {\n        setFires(data);\n      });\n      fetchTable({\n        setFires,\n        name\n      });\n    } else {\n      fetch(encoded).then(response => response.json()).then(data => {\n        setFires(data);\n      });\n    }\n  }, [name]);\n  const body = fires.map((fire, index) => /*#__PURE__*/React.createElement(TableBody, {\n    fire: fire,\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 45\n    }\n  }));\n  const result = /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 20\n    }\n  }, \"\\u0418\\u0442\\u043E\\u0433\\u043E \\u0432\\u044B\\u0435\\u0437\\u0434\\u043E\\u0432: \", fires.length);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"box1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(ReactSelect, {\n    onSubmit: state => fetchTable({\n      setFires,\n      name,\n      ...state\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"box2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 17\n    }\n  }, result)), /*#__PURE__*/React.createElement(\"table\", {\n    className: \"table-sm table-hover table-striped\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TableHead, {\n    class: \"head\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"tbody\", {\n    class: \"main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 17\n    }\n  }, body)));\n}\n\nconst fetchTable = ({\n  fireStation = \"\",\n  message = \"\",\n  district = \"\",\n  destination = \"\",\n  whereWasTheFire = \"\",\n  name,\n  setFires\n}) => {\n  const encoded = encodeURI(`/api/get/${name}`);\n  fetch(encoded, {\n    method: \"POST\",\n    body: JSON.stringify({\n      fireStation,\n      message,\n      district,\n      destination,\n      whereWasTheFire\n    }),\n    headers: {\n      \"Content-type\": \"application/json; charset=UTF-8\"\n    }\n  }).then(response => response.json()).then(data => {\n    console.log(data.length);\n    setFires(data);\n  });\n};\n\nfunction checkProperties(obj) {\n  for (let key in obj) {\n    if (obj[key] !== null && obj[key] !== '') return false;\n  }\n}","map":{"version":3,"sources":["C:/Users/Alex/IdeaProjects/FireFrontEnd/src/FilteredTable.js"],"names":["React","useState","useEffect","TableHead","TableBody","ReactSelect","FilteredTable","props","fires","setFires","name","fireStation","message","district","destination","whereWasTheFire","match","params","objectWithProperties","encoded","encodeURI","api","checkProperties","fetch","method","body","JSON","stringify","headers","then","response","json","data","fetchTable","map","fire","index","result","length","state","console","log","obj","key"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport TableHead from \"./TableHead\";\r\nimport TableBody from \"./TableBody\";\r\nimport ReactSelect from \"./ReactSelect\";\r\n\r\nexport default function FilteredTable (props) {\r\n\r\n    const [fires, setFires] = useState ([]);\r\n    const { name, fireStation, message, district, destination, whereWasTheFire }  = props.match.params;\r\n    const objectWithProperties = { fireStation, message, district, destination, whereWasTheFire };\r\n    const encoded = encodeURI(`/api/get/${name}`);\r\n    useEffect((api) => {\r\n        if (checkProperties(objectWithProperties)) {\r\n            fetch(encoded, {\r\n                method: \"POST\",\r\n                body: JSON.stringify({\r\n                    fireStation,\r\n                    message,\r\n                    district,\r\n                    destination,\r\n                    whereWasTheFire\r\n                }),\r\n                headers: {\r\n                    \"Content-type\": \"application/json; charset=UTF-8\"\r\n                }\r\n            })\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    setFires(data);\r\n                });\r\n            fetchTable({setFires, name})\r\n        } else {\r\n            fetch(encoded)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    setFires(data);\r\n                });\r\n        }\r\n    }, [name]);\r\n\r\n    const body = fires.map((fire, index) => <TableBody fire={fire} key={index} />);\r\n    const result = <h3>Итого выездов: {fires.length}</h3>;\r\n    return (\r\n        <>\r\n            <div class=\"box\">\r\n                <div class=\"box1\">\r\n                    <ReactSelect onSubmit={(state) => fetchTable({setFires, name, ...state})}/>\r\n                </div>\r\n                <div class=\"box2\" >\r\n                    {result}\r\n                </div>\r\n            </div>\r\n            <table className=\"table-sm table-hover table-striped\">\r\n                <TableHead class=\"head\" />\r\n                <tbody class=\"main\">\r\n                    { body }\r\n                </tbody>\r\n            </table>\r\n        </>\r\n    )\r\n}\r\n\r\nconst fetchTable = ({fireStation = \"\", message = \"\", district = \"\", destination = \"\", whereWasTheFire = \"\",\r\n                        name, setFires}) => {\r\n    const encoded = encodeURI(`/api/get/${name}`);\r\n    fetch(encoded, {\r\n        method: \"POST\",\r\n        body: JSON.stringify({\r\n            fireStation,\r\n            message,\r\n            district,\r\n            destination,\r\n            whereWasTheFire\r\n        }),\r\n        headers: {\r\n            \"Content-type\": \"application/json; charset=UTF-8\"\r\n        }\r\n    })\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            console.log(data.length);\r\n            setFires(data);\r\n        });\r\n\r\n}\r\n\r\nfunction checkProperties(obj) {\r\n    for(let key in obj){\r\n        if (obj[key] !== null && obj[key] !== '')\r\n            return false\r\n    }\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}