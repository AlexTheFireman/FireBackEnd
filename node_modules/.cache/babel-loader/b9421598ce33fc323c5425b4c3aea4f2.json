{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\Alex\\\\IdeaProjects\\\\FireFrontEnd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\Alex\\\\IdeaProjects\\\\FireFrontEnd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import Table from\"./Table\";import ReactSelect from\"./ReactSelect\";export default function SimplestFilteredTable(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),fires=_useState2[0],setFires=_useState2[1];var _props$match$params=props.match.params,name=_props$match$params.name,fireStation=_props$match$params.fireStation,message=_props$match$params.message,district=_props$match$params.district,destination=_props$match$params.destination,whereWasTheFire=_props$match$params.whereWasTheFire,rescueWorks=_props$match$params.rescueWorks,fireChiefRank=_props$match$params.fireChiefRank,amountOfSmokeGroups=_props$match$params.amountOfSmokeGroups,extinguishingAgents=_props$match$params.extinguishingAgents,usingHydrants=_props$match$params.usingHydrants,locality=_props$match$params.locality,fireRank=_props$match$params.fireRank;var objectWithProperties={fireStation:fireStation,message:message,district:district,destination:destination,whereWasTheFire:whereWasTheFire,rescueWorks:rescueWorks,fireChiefRank:fireChiefRank,amountOfSmokeGroups:amountOfSmokeGroups,extinguishingAgents:extinguishingAgents,usingHydrants:usingHydrants,locality:locality,fireRank:fireRank};var encoded=encodeURI(\"/api/get/\".concat(name));useEffect(function(api){if(checkProperties(objectWithProperties)){fetch(encoded,{method:\"POST\",body:JSON.stringify({fireStation:fireStation,message:message,district:district,destination:destination,whereWasTheFire:whereWasTheFire,rescueWorks:rescueWorks,fireChiefRank:fireChiefRank,amountOfSmokeGroups:amountOfSmokeGroups,extinguishingAgents:extinguishingAgents,usingHydrants:usingHydrants,locality:locality,fireRank:fireRank}),headers:{\"Content-type\":\"application/json; charset=UTF-8\"}}).then(function(response){return response.json();}).then(function(data){setFires(data);});fetchTable({setFires:setFires,name:name});}else{fetch(encoded).then(function(response){return response.json();}).then(function(data){setFires(data);});}},[name]);var result=/*#__PURE__*/React.createElement(\"h3\",null,\"\\u0418\\u0442\\u043E\\u0433\\u043E \\u0432\\u044B\\u0435\\u0437\\u0434\\u043E\\u0432: \",fires.length);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"box\"},/*#__PURE__*/React.createElement(\"div\",{className:\"box1\"},/*#__PURE__*/React.createElement(ReactSelect,{onSubmit:function onSubmit(state){return fetchTable(_objectSpread({setFires:setFires,name:name},state));}})),/*#__PURE__*/React.createElement(\"div\",{className:\"box2\"},result)),/*#__PURE__*/React.createElement(\"table\",{className:\"table-sm table-hover table-striped\"},/*#__PURE__*/React.createElement(Table,{fires:fires})));}var fetchTable=function fetchTable(_ref){var _ref$fireStation=_ref.fireStation,fireStation=_ref$fireStation===void 0?\"\":_ref$fireStation,_ref$message=_ref.message,message=_ref$message===void 0?\"\":_ref$message,_ref$district=_ref.district,district=_ref$district===void 0?\"\":_ref$district,_ref$destination=_ref.destination,destination=_ref$destination===void 0?\"\":_ref$destination,_ref$whereWasTheFire=_ref.whereWasTheFire,whereWasTheFire=_ref$whereWasTheFire===void 0?\"\":_ref$whereWasTheFire,_ref$rescueWorks=_ref.rescueWorks,rescueWorks=_ref$rescueWorks===void 0?\"\":_ref$rescueWorks,_ref$fireChiefRank=_ref.fireChiefRank,fireChiefRank=_ref$fireChiefRank===void 0?\"\":_ref$fireChiefRank,_ref$amountOfSmokeGro=_ref.amountOfSmokeGroups,amountOfSmokeGroups=_ref$amountOfSmokeGro===void 0?\"\":_ref$amountOfSmokeGro,_ref$extinguishingAge=_ref.extinguishingAgents,extinguishingAgents=_ref$extinguishingAge===void 0?\"\":_ref$extinguishingAge,_ref$usingHydrants=_ref.usingHydrants,usingHydrants=_ref$usingHydrants===void 0?\"\":_ref$usingHydrants,_ref$locality=_ref.locality,locality=_ref$locality===void 0?\"\":_ref$locality,_ref$fireRank=_ref.fireRank,fireRank=_ref$fireRank===void 0?\"\":_ref$fireRank,name=_ref.name,setFires=_ref.setFires;var encoded=encodeURI(\"/api/get/\".concat(name));fetch(encoded,{method:\"POST\",body:JSON.stringify({fireStation:fireStation,message:message,district:district,destination:destination,whereWasTheFire:whereWasTheFire,rescueWorks:rescueWorks,fireChiefRank:fireChiefRank,amountOfSmokeGroups:amountOfSmokeGroups,extinguishingAgents:extinguishingAgents,usingHydrants:usingHydrants,locality:locality,fireRank:fireRank}),headers:{\"Content-type\":\"application/json; charset=UTF-8\"}}).then(function(response){return response.json();}).then(function(data){console.log(data.length);setFires(data);});};function checkProperties(obj){for(var key in obj){if(obj[key]!==null&&obj[key]!=='')return false;}}","map":{"version":3,"sources":["C:/Users/Alex/IdeaProjects/FireFrontEnd/src/FilteredTable.js"],"names":["React","useState","useEffect","Table","ReactSelect","SimplestFilteredTable","props","fires","setFires","match","params","name","fireStation","message","district","destination","whereWasTheFire","rescueWorks","fireChiefRank","amountOfSmokeGroups","extinguishingAgents","usingHydrants","locality","fireRank","objectWithProperties","encoded","encodeURI","api","checkProperties","fetch","method","body","JSON","stringify","headers","then","response","json","data","fetchTable","result","length","state","console","log","obj","key"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Table from \"./Table\";\r\nimport ReactSelect from \"./ReactSelect\";\r\n\r\nexport default function SimplestFilteredTable (props) {\r\n\r\n    const [fires, setFires] = useState ([]);\r\n    const { name, fireStation, message, district, destination, whereWasTheFire, rescueWorks,\r\n        fireChiefRank, amountOfSmokeGroups, extinguishingAgents, usingHydrants, locality,\r\n        fireRank }  = props.match.params;\r\n    const objectWithProperties = { fireStation, message, district, destination, whereWasTheFire, rescueWorks,\r\n        fireChiefRank, amountOfSmokeGroups, extinguishingAgents, usingHydrants, locality, fireRank };\r\n    const encoded = encodeURI(`/api/get/${name}`);\r\n    useEffect((api) => {\r\n        if (checkProperties(objectWithProperties)) {\r\n            fetch(encoded, {\r\n                method: \"POST\",\r\n                body: JSON.stringify({\r\n                    fireStation,\r\n                    message,\r\n                    district,\r\n                    destination,\r\n                    whereWasTheFire,\r\n                    rescueWorks,\r\n                    fireChiefRank,\r\n                    amountOfSmokeGroups,\r\n                    extinguishingAgents,\r\n                    usingHydrants,\r\n                    locality,\r\n                    fireRank\r\n                }),\r\n                headers: {\r\n                    \"Content-type\": \"application/json; charset=UTF-8\"\r\n                }\r\n            })\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    setFires(data);\r\n                });\r\n            fetchTable({setFires, name})\r\n        } else {\r\n            fetch(encoded)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    setFires(data);\r\n                });\r\n        }\r\n    }, [name]);\r\n\r\n    const result = <h3>Итого выездов: {fires.length}</h3>;\r\n    return (\r\n        <>\r\n            <div className=\"box\">\r\n                <div className=\"box1\">\r\n                    <ReactSelect onSubmit={(state) => fetchTable({setFires, name, ...state})}/>\r\n                </div>\r\n                <div className=\"box2\" >\r\n                    {result}\r\n                </div>\r\n            </div>\r\n            <table className=\"table-sm table-hover table-striped\">\r\n                <Table fires = {fires}/>\r\n\r\n            </table>\r\n        </>\r\n    )\r\n}\r\n\r\nconst fetchTable = ({fireStation = \"\", message = \"\", district = \"\", destination = \"\", whereWasTheFire = \"\",\r\n                        rescueWorks = \"\", fireChiefRank = \"\", amountOfSmokeGroups = \"\",\r\n                        extinguishingAgents = \"\", usingHydrants = \"\", locality = \"\", fireRank = \"\",\r\n                        name, setFires}) => {\r\n    const encoded = encodeURI(`/api/get/${name}`);\r\n    fetch(encoded, {\r\n        method: \"POST\",\r\n        body: JSON.stringify({\r\n            fireStation,\r\n            message,\r\n            district,\r\n            destination,\r\n            whereWasTheFire,\r\n            rescueWorks,\r\n            fireChiefRank,\r\n            amountOfSmokeGroups,\r\n            extinguishingAgents,\r\n            usingHydrants,\r\n            locality,\r\n            fireRank\r\n        }),\r\n        headers: {\r\n            \"Content-type\": \"application/json; charset=UTF-8\"\r\n        }\r\n    })\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            console.log(data.length);\r\n            setFires(data);\r\n        });\r\n\r\n}\r\n\r\nfunction checkProperties(obj) {\r\n    for(let key in obj){\r\n        if (obj[key] !== null && obj[key] !== '')\r\n            return false\r\n    }\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}